# JBrowse visualization

Workflow to visualize pggb graphs in jbrowse


* JBrowse: https://github.com/GMOD/jbrowse-components/

* JBrowse MAF plugin: https://github.com/cmdcolin/jbrowse-plugin-mafviewer

* WGA Tools: https://github.com/wjwei-handsome/wgatools

* MAFChunk: https://github.com/pangenome/mafchunk


1. build graph with `pggb`
2. Do a `cargo install maf2bed`
3. `wgatools pafpseudo -f <FASTA_FILE> -g <TARGET> -o <OUTPUT.maf> <INPUT.paf>`
   - `FASTA_FILE` is the file with all the sequenced from which the
     pggb graph was built
   - `TARGET` is the name of the assembly to use as reference
   - `OUTPUT.maf` is the resulting MAF file
   - `INPUT.paf` is the PAF file generated by pggb during graph
     construction
4. chunk the resulting MAF file using MAFchunk: `mafchunk OUTPUT.maf 100000 > chunked.maf`
5. `cat chunked.maf | maf2bed <TARGET> | bgzip > out.bed.gz`
6. `tabix -p bed out.bed.gz`

Next:
```
# starts webpack dev server
cd products/jbrowse-desktop
yarn start

# starts electron window
cd products/jbrowse-desktop
yarn electron
```

Then install the MAF Plugin (Tools -> Plugin Store -> MAFViewer
Plugin), and add a MAF track; provide as input `out.bed.gz` and
`out.bed.gz.tbi`, and the names of the assemblies in `FASTA_FILE`.
